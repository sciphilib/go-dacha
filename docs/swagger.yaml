definitions:
  models.AdAdded:
    properties:
      id:
        type: integer
    type: object
  models.AdInput:
    properties:
      category:
        type: string
      datetime:
        type: string
      description:
        type: string
      location:
        $ref: '#/definitions/models.LocationAd'
      pictures:
        items:
          type: string
        type: array
      price:
        type: string
      subcategory:
        type: string
      title:
        type: string
      user_email:
        type: string
    required:
    - category
    - datetime
    - location
    - price
    - subcategory
    - title
    - user_email
    type: object
  models.AdResponse:
    properties:
      datetime:
        type: string
      description:
        type: string
      id:
        type: integer
      location:
        allOf:
        - $ref: '#/definitions/models.LocationAd'
        description: Предполагается, что Location - это структура с полями type и
          coordinates
      pictures:
        items:
          type: string
        type: array
      price:
        type: string
      subcategory:
        allOf:
        - $ref: '#/definitions/models.SubcategoryAd'
        description: Предполагается, что Subcategory - это структура с полями id,
          name и category
      title:
        type: string
      user:
        allOf:
        - $ref: '#/definitions/models.UserAd'
        description: Предполагается, что User - это структура с полями id, name, email,
          phone_number, и location
    type: object
  models.LocationAd:
    properties:
      coordinates:
        description: 'Example: [123.45, 67.89]'
        items:
          type: number
        type: array
      type:
        description: Coordinates is an array of two float numbers.
        type: string
    type: object
  models.SubcategoryAd:
    properties:
      category:
        type: string
      name:
        type: string
    type: object
  models.UserAd:
    properties:
      email:
        type: string
      id:
        type: integer
      location:
        $ref: '#/definitions/models.LocationAd'
      name:
        type: string
      phone_number:
        type: string
    type: object
  models.UserLocation:
    properties:
      coordinates:
        description: 'Example: [123.45, 67.89]'
        items:
          type: number
        type: array
      type:
        description: Coordinates is an array of two float numbers.
        type: string
    type: object
  models.UserResponse:
    properties:
      email:
        type: string
      id:
        type: integer
      location:
        $ref: '#/definitions/models.UserLocation'
      name:
        type: string
      phone_number:
        type: string
    type: object
  models.UserUpdateSwagger:
    properties:
      location:
        $ref: '#/definitions/models.UserLocation'
      name:
        type: string
      phone_number:
        type: string
    type: object
info:
  contact: {}
paths:
  /ads:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all advertisements with detailed information
      produces:
      - application/json
      responses:
        "200":
          description: An array of advertisement objects
          schema:
            items:
              $ref: '#/definitions/models.AdResponse'
            type: array
        "500":
          description: Internal Server Error
      summary: Get all ads
      tags:
      - advertisements
    post:
      consumes:
      - application/json
      description: Adds a new advertisement with the given details
      parameters:
      - description: Create Ad
        in: body
        name: ad
        required: true
        schema:
          $ref: '#/definitions/models.AdInput'
      produces:
      - application/json
      responses:
        "200":
          description: ID of the newly created ad
          schema:
            $ref: '#/definitions/models.AdAdded'
        "400":
          description: Validation Error
          schema:
            type: string
        "403":
          description: Failed to create a new ad
          schema:
            type: string
        "404":
          description: Subcategory/User is not found
          schema:
            type: string
        "500":
          description: Internal Server Error
          schema:
            type: string
      summary: Add a new advertisement
      tags:
      - advertisements
  /ads/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes an advertisement by its ID
      parameters:
      - description: Ad ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Ad deleted successfully
          schema:
            type: string
        "404":
          description: Ad not found
          schema:
            type: string
      summary: Delete an advertisement
      tags:
      - advertisements
    get:
      consumes:
      - application/json
      description: Retrieve an advertisements by id with detailed information
      parameters:
      - description: Ad ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: An advertisement object
          schema:
            $ref: '#/definitions/models.AdResponse'
        "404":
          description: Ad not found
        "500":
          description: Internal Server Error
      summary: Get an ad by id
      tags:
      - advertisements
    put:
      consumes:
      - application/json
      description: Update an existing advertisement by its ID with new information
      parameters:
      - description: Ad ID
        in: path
        name: id
        required: true
        type: integer
      - description: Advertisement data
        in: body
        name: ad
        required: true
        schema:
          $ref: '#/definitions/models.AdInput'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated advertisement
          schema:
            $ref: '#/definitions/models.AdResponse'
        "400":
          description: Validation Error
          schema:
            type: string
        "403":
          description: Failed to update the ad
          schema:
            type: string
        "404":
          description: Ad/Subcategory/User not found
          schema:
            type: string
      summary: Update an advertisement
      tags:
      - advertisements
  /ads/{user_id}/nearest:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all advertisements from near to far from user's
        location
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: An array of advertisement objects
          schema:
            items:
              $ref: '#/definitions/models.AdResponse'
            type: array
        "500":
          description: Internal Server Error
      summary: Get all ads ordered by distance from user's location
      tags:
      - advertisements
  /ads/newest:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all advertisements from newest to oldest
      produces:
      - application/json
      responses:
        "200":
          description: An array of advertisement objects
          schema:
            items:
              $ref: '#/definitions/models.AdResponse'
            type: array
        "500":
          description: Internal Server Error
      summary: Get all ads ordered by date
      tags:
      - advertisements
  /users/{id}:
    put:
      consumes:
      - application/json
      description: Updates details of an existing user by ID.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: User data to update
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.UserUpdateSwagger'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated user details
          schema:
            $ref: '#/definitions/models.UserResponse'
        "400":
          description: Validation Error
          schema:
            type: string
        "404":
          description: User not found
          schema:
            type: string
      summary: Update user details
      tags:
      - users
swagger: "2.0"
